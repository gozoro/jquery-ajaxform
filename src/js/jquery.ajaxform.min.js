;(function(d){d.fn.submitAjax=function(e){return e?d(this).on("submitajax",e):d(this).submit()};d.fn.ajaxform=function(){var e=this,t=function(a){if(void 0!==window.FormData){var b=new FormData;d.each(a.serializeArray(),function(a,c){b.append(c.name,c.value)});d.each(a.find("input[type='file']"),function(a,c){d.each(d(c)[0].files,function(a,d){b.append(c.name,d)})})}else b=void 0;return b},h=function(a){a=d(a);var b=a.parents("form"),g=a.data("element"),c=a.data("error-class"),f=a.data("error-element"),
k=a.data("error-attr");c&&(g?b.find(g).removeClass(c):a.removeClass(c));k?f?b.find(f).removeAttr(k):a.removeAttr(k):f&&b.find(f).html("")},p=function(a){var b=d(this),g=b.attr("action");if(b.find("input[type=file]").length)if(void 0!==window.FormData)a.preventDefault(),a=t(b),d.ajax({url:g,type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(a,c,d){b.trigger("submitajax",[a,c,d])}});else{var c=d('<iframe name=ajaxformiframe id="ajaxformiframe" width="0" height="0" frameborder="0" style="border:none;visibility:hidden;display:none;"></iframe>');
b.append(c).attr("target","ajaxformiframe");c.load(function(){var a=c.contents().find("body").text();try{var k=d.parseJSON(a);b.trigger("submitajax",[k,"success",null])}catch(u){b.trigger("submitajax",[a,"success",null])}b.removeAttr("target");c.contents().find("body").html("");c.unbind("load");c.remove()})}else a.preventDefault(),a=b.serializeArray(),d.post(g,a,function(a,c,d){b.trigger("submitajax",[a,c,d])})},q=function(a,b){var g=d(this);if(b.errors)for(var c in b.errors){var f=g.find(":input[name="+
c+'],:input[name^="'+c+'["]'),e=b.errors[c],h=f.data("element"),m=f.data("error-class"),l=f.data("error-element"),n=f.data("error-attr");m&&(h?g.find(h).addClass(m):f.addClass(m));n?l?g.find(l).attr(n,e):f.attr(n,e):l&&g.find(l).html(e)}},r=function(){d(this).find(":input").each(function(a,b){h(b)})};(function(){if(!e.data("ajaxform")){e.data("ajaxform",1);var a=e.selector;a||(a=e.attr("id"))&&(a="#"+a);if(a)d(document).on("submit.ajaxform",a,p).on("submitajax",a,q).on("keyup change reset",a+" :input",
function(){h(this)}).on("reset",a,r);else e.on("submit.ajaxform",p).on("submitajax",q).on("keyup change",":input",function(){h(this)}).on("reset",r)}})();return e}})(jQuery);$(document).ready(function(){$("form[data-form=ajaxform]").ajaxform()});
(function(e){e.fn.submitAjax=function(k){return k?e(this).on("submitajax",k):e(this).submit()};e.fn.ajaxform=function(){var k=this,t=function(b){if(void 0!==window.FormData){var a=new FormData;e.each(b.serializeArray(),function(f,d){a.append(d.name,d.value)});e.each(b.find("input[type='file']"),function(f,d){e.each(e(d)[0].files,function(c,h){a.append(d.name,h)})})}else a=void 0;return a},l=function(b){var a=e(b);b=a.parents("form");var f=a.data("element");a=f?b.find(f):a;f=a.data("error-element");
var d=a.data("error-class"),c=a.data("error-attr");d&&a.removeClass(d);c?f?b.find(f).removeAttr(c):a.removeAttr(c):f&&b.find(f).html("")},n=function(b){var a=e(this),f=a.attr("action");if(a.find("input[type=file]").length)if(void 0!==window.FormData)b.preventDefault(),b=t(a),e.ajax({url:f,type:"POST",data:b,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(c,h,g){a.trigger("submitajax",[c,h,g])}});else{var d=e('<iframe name=ajaxformiframe id="ajaxformiframe" width="0" height="0" frameborder="0" style="border:none;visibility:hidden;display:none;"></iframe>');
a.append(d).attr("target","ajaxformiframe");d.load(function(){var c=d.contents().find("body").text();try{var h=e.parseJSON(c);a.trigger("submitajax",[h,"success",null])}catch(g){a.trigger("submitajax",[c,"success",null])}a.removeAttr("target");d.contents().find("body").html("");d.unbind("load");d.remove()})}else b.preventDefault(),b=a.serializeArray(),e.post(f,b,function(c,h,g){a.trigger("submitajax",[c,h,g])})},q=function(b,a){var f=e(this);if(a.errors)for(var d in a.errors){var c=f.find(":input[name="+
d+'],:input[name^="'+d+'["]'),h=a.errors[d],g=c.data("element");c=g?f.find(g):c;g=c.data("error-element");var p=c.data("error-class"),m=c.data("error-attr");p&&c.addClass(p);m?g?f.find(g).attr(m,h):c.attr(m,h):g&&f.find(g).html(h)}},r=function(){e(this).find(":input").each(function(b,a){l(a)})};(function(){if(!k.data("ajaxform")){k.data("ajaxform",1);var b=k.selector;b||(b=k.attr("id"))&&(b="#"+b);if(b)e(document).on("submit.ajaxform",b,n).on("submitajax",b,q).on("keyup change reset",b+" :input",
function(){l(this)}).on("reset",b,r);else k.on("submit.ajaxform",n).on("submitajax",q).on("keyup change",":input",function(){l(this)}).on("reset",r)}})();return k}})(jQuery);$(document).ready(function(){$("form[data-form=ajaxform]").ajaxform()});
(function(b){b.fn.submitAjax=function(h){return h?b(this).on("submitajax",h):b(this).submit()};b.fn.ajaxform=function(){var h=function(a){if(void 0!==window.FormData){var c=new FormData;b.each(a.serializeArray(),function(a,b){c.append(b.name,b.value)});b.each(a.find("input[type='file']"),function(a,d){b.each(b(d)[0].files,function(b,a){c.append(d.name,a)})})}else c=void 0;return c},k=function(a){a=b(a);var c=a.parents("form"),g=a.data("element"),d=a.data("error-class"),f=a.data("error-element"),l=
a.data("error-attr");d&&(g?c.find(g).removeClass(d):a.removeClass(d));l?f?c.find(f).removeAttr(l):a.removeAttr(l):f&&c.find(f).html("")},p=function(a){var c=b(this),g=c.attr("action");if(c.find("input[type=file]").length)if(void 0!==window.FormData)a.preventDefault(),a=h(c),b.ajax({url:g,type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(a,b,d){c.trigger("submitajax",[a,b,d])}});else{var d=b('<iframe name=ajaxformiframe id="ajaxformiframe" width="0" height="0" frameborder="0" style="border:none;visibility:hidden;display:none;"></iframe>');
c.append(d).attr("target","ajaxformiframe");d.load(function(){var a=d.contents().find("body").text();try{var l=b.parseJSON(a);c.trigger("submitajax",[l,"success",null])}catch(t){c.trigger("submitajax",[a,"success",null])}c.removeAttr("target");d.contents().find("body").html("");d.unbind("load");d.remove()})}else a.preventDefault(),a=c.serializeArray(),b.post(g,a,function(a,b,d){c.trigger("submitajax",[a,b,d])})},q=function(a,c){var g=b(this);if(c.errors)for(var d in c.errors){var f=g.find(":input[name="+
d+"]"),e=c.errors[d],h=f.data("element"),k=f.data("error-class"),m=f.data("error-element"),n=f.data("error-attr");k&&(h?g.find(h).addClass(k):f.addClass(k));n?m?g.find(m).attr(n,e):f.attr(n,e):m&&g.find(m).html(e)}},r=function(){b(this).find(":input").each(function(a,b){k(b)})};if(!this.data("ajaxform")){this.data("ajaxform","1");var e=this.selector;e||(e=this.attr("id"))&&(e="#"+e);if(e)b(document).on("submit.ajaxform",e,p).on("submitajax",e,q).on("keyup change reset",e+" :input",function(){k(this)}).on("reset",
e,r);else this.on("submit.ajaxform",p).on("submitajax",q).on("keyup change",":input",function(){k(this)}).on("reset",r)}return this}})(jQuery);$(document).ready(function(){$("form").each(function(){var b=$(this),h=b.data("via");/^ajax$/i.test(h)&&b.ajaxform()})});
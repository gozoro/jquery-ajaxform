(function(c){c.fn.submitAjax=function(e){return e?c(this).on("submitajax",e):c(this).submit()};c.fn.ajaxform=function(){var e=this,t=function(a){if(void 0!==window.FormData){var b=new FormData;c.each(a.serializeArray(),function(a,d){b.append(d.name,d.value)});c.each(a.find("input[type='file']"),function(a,d){c.each(c(d)[0].files,function(a,c){b.append(d.name,c)})})}else b=void 0;return b},h=function(a){a=c(a);var b=a.parents("form"),g=a.data("element"),d=a.data("error-class"),f=a.data("error-element"),
k=a.data("error-attr");d&&(g?b.find(g).removeClass(d):a.removeClass(d));k?f?b.find(f).removeAttr(k):a.removeAttr(k):f&&b.find(f).html("")},p=function(a){var b=c(this),g=b.attr("action");if(b.find("input[type=file]").length)if(void 0!==window.FormData)a.preventDefault(),a=t(b),c.ajax({url:g,type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(a,c,d){b.trigger("submitajax",[a,c,d])}});else{var d=c('<iframe name=ajaxformiframe id="ajaxformiframe" width="0" height="0" frameborder="0" style="border:none;visibility:hidden;display:none;"></iframe>');
b.append(d).attr("target","ajaxformiframe");d.load(function(){var a=d.contents().find("body").text();try{var k=c.parseJSON(a);b.trigger("submitajax",[k,"success",null])}catch(u){b.trigger("submitajax",[a,"success",null])}b.removeAttr("target");d.contents().find("body").html("");d.unbind("load");d.remove()})}else a.preventDefault(),a=b.serializeArray(),c.post(g,a,function(a,c,d){b.trigger("submitajax",[a,c,d])})},q=function(a,b){var g=c(this);if(b.errors)for(var d in b.errors){var f=g.find(":input[name="+
d+"]"),e=b.errors[d],h=f.data("element"),m=f.data("error-class"),l=f.data("error-element"),n=f.data("error-attr");m&&(h?g.find(h).addClass(m):f.addClass(m));n?l?g.find(l).attr(n,e):f.attr(n,e):l&&g.find(l).html(e)}},r=function(){c(this).find(":input").each(function(a,b){h(b)})};(function(){if(!e.data("ajaxform")){e.data("ajaxform",1);var a=e.selector;a||(a=e.attr("id"))&&(a="#"+a);if(a)c(document).on("submit.ajaxform",a,p).on("submitajax",a,q).on("keyup change reset",a+" :input",function(){h(this)}).on("reset",
a,r);else e.on("submit.ajaxform",p).on("submitajax",q).on("keyup change",":input",function(){h(this)}).on("reset",r)}})();return e}})(jQuery);$(document).ready(function(){$("form[data-form=ajaxform]").ajaxform()});
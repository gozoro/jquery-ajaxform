(function(b){b.fn.submitAjax=function(g){return g?b(this).on("submitajax",g):b(this).submit()};b.fn.ajaxform=function(){var g=function(a){if(void 0!==window.FormData){var c=new FormData;b.each(a.serializeArray(),function(a,b){c.append(b.name,b.value)});b.each(a.find("input[type='file']"),function(a,d){b.each(b(d)[0].files,function(a,b){c.append(d.name,b)})})}else c=void 0;return c},n=function(a){a=b(a);var c=a.parents("form"),f=a.data("element"),d=a.data("error-class"),e=a.data("error-element"),h=
a.data("error-attr");d&&(f?c.find(f).removeClass(d):a.removeClass(d));h?e?c.find(e).removeAttr(h):a.removeAttr(h):e&&c.find(e).html("")};this.on("submit.ajaxform",function(a){var c=b(this),f=c.attr("action");if(c.find("input[type=file]").length)if(void 0!==window.FormData)a.preventDefault(),a=g(c),b.ajax({url:f,type:"POST",data:a,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(b,a,d){c.trigger("submitajax",[b,a,d])}});else{var d=b('<iframe name=ajaxformiframe id="ajaxformiframe" width="0" height="0" frameborder="0" style="border:none;visibility:hidden;display:none;"></iframe>');
c.append(d).attr("target","ajaxformiframe");d.load(function(){var a=d.contents().find("body").text();try{var h=b.parseJSON(a);c.trigger("submitajax",[h,"success",null])}catch(p){c.trigger("submitajax",[a,"success",null])}c.removeAttr("target");d.contents().find("body").html("");d.unbind("load");d.remove()})}else a.preventDefault(),a=c.serializeArray(),b.post(f,a,function(a,b,d){c.trigger("submitajax",[a,b,d])})});this.submitAjax(function(a,c){var f=b(this);if(c.errors)for(var d in c.errors){var e=
f.find(":input[name="+d+"]"),h=c.errors[d],g=e.data("element"),l=e.data("error-class"),k=e.data("error-element"),m=e.data("error-attr");l&&(g?f.find(g).addClass(l):e.addClass(l));m?k?f.find(k).attr(m,h):e.attr(m,h):k&&f.find(k).html(h)}});this.find(":input").keyup(function(){n(this)});this.on("reset",function(){b(this).find(":input").each(function(a,b){n(b)})});return this}})(jQuery);$(document).ready(function(){$("form").each(function(){var b=$(this),g=b.data("via");/^ajax$/i.test(g)&&b.ajaxform()})});